package com.cgihosting.service.exploit;

import com.cgihosting.domain.referentiel.ReferentielErreursRencontreesDTO;
import com.cgihosting.domain.referentiel.ReferentielMailsDTO;
import com.cgihosting.repository.ReferentielErreursRencontreesRepository;
import com.cgihosting.repository.ReferentielMailsRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.PageRequest;
import org.springframework.data.domain.Sort;
import org.springframework.stereotype.Service;

import java.util.List;

/**
 * Created by marinib on 12/01/2017
 */
@Service
public class GererMailsServiceImpl implements GererMailsService {

    /**
     * La balise autowired est indispensable
     */

    @Autowired
    private ReferentielMailsRepository referentielMailsRepository;

    @Override
    public List<ReferentielMailsDTO> recupererReferentielMails() {

        List<ReferentielMailsDTO> referentielMailsDTOListe = null;

        referentielMailsDTOListe = (List<ReferentielMailsDTO>) referentielMailsRepository.findAll();

        return referentielMailsDTOListe;

    }



    @Override
    public ReferentielMailsDTO recupererReferentielMailsById(int identifiant) {

        ReferentielMailsDTO referentielMailsDTO = referentielMailsRepository.findById(identifiant);

        return referentielMailsDTO;
    }



    @Override
    public int modifierReferentielMails(ReferentielMailsDTO referentielMailsDTO) {

        referentielMailsRepository.save(referentielMailsDTO);

        return referentielMailsDTO.getId();
    }

    public Long nombreTotalMails() {
        Long total;

        total = referentielMailsRepository.count();
        return total;
    }

    @Override
    public Page<ReferentielMailsDTO> searchAllReferentielMailsDTOPageByPage(Integer page, Integer ligneParPage) {

        Page<ReferentielMailsDTO> referentielMailsDTOPage;


        referentielMailsDTOPage = referentielMailsRepository.findAll(new PageRequest(page,ligneParPage, new Sort(
                new Sort.Order(Sort.Direction.ASC, "libelle")
        )));
        return referentielMailsDTOPage;
    }


}
